import{r as d,j as f,c as we,u as je,R as C,o as te,q as Ce,C as _e,g as Se,h as Oe,z as Pe,i as Ee,k as Ne,L as ke,l as ze,m as Ie}from"./index-DVyelFuQ.js";import{t as V,d as Re,D as B,E as _,u as $e,G as Ae,z as D,p as Be,o as De,q as Z,r as k,b as J,H as Ve,w as re,I as Le,y as Ge,A as Me,B as Fe,C as qe}from"./chunk-JZOL6GD7-S1f6PCVu.js";function Te(){const e=()=>()=>{};return d.useSyncExternalStore(e,()=>!0,()=>!1)}var He=["data-[top-scroll=true]:[mask-image:linear-gradient(0deg,#000_calc(100%_-_var(--scroll-shadow-size)),transparent)]","data-[bottom-scroll=true]:[mask-image:linear-gradient(180deg,#000_calc(100%_-_var(--scroll-shadow-size)),transparent)]","data-[top-bottom-scroll=true]:[mask-image:linear-gradient(#000,#000,transparent_0,#000_var(--scroll-shadow-size),#000_calc(100%_-_var(--scroll-shadow-size)),transparent)]"],We=["data-[left-scroll=true]:[mask-image:linear-gradient(270deg,#000_calc(100%_-_var(--scroll-shadow-size)),transparent)]","data-[right-scroll=true]:[mask-image:linear-gradient(90deg,#000_calc(100%_-_var(--scroll-shadow-size)),transparent)]","data-[left-right-scroll=true]:[mask-image:linear-gradient(to_right,#000,#000,transparent_0,#000_var(--scroll-shadow-size),#000_calc(100%_-_var(--scroll-shadow-size)),transparent)]"],X=V({base:[],variants:{orientation:{vertical:["overflow-y-auto",...He],horizontal:["overflow-x-auto",...We]},hideScrollBar:{true:"scrollbar-hide",false:""}},defaultVariants:{orientation:"vertical",hideScrollBar:!1}}),Ue=V({slots:{base:["flex","relative","justify-center","items-center","box-border","overflow-hidden","align-middle","text-white","z-0",...Re],img:["flex","object-cover","w-full","h-full","transition-opacity","!duration-500","opacity-0","data-[loaded=true]:opacity-100"],fallback:[...B,"flex","items-center","justify-center"],name:[...B,"font-normal","text-center","text-inherit"],icon:[...B,"flex","items-center","justify-center","text-inherit","w-full","h-full"]},variants:{size:{sm:{base:"w-8 h-8 text-tiny"},md:{base:"w-10 h-10 text-tiny"},lg:{base:"w-14 h-14 text-small"}},color:{default:{base:_.solid.default},primary:{base:_.solid.primary},secondary:{base:_.solid.secondary},success:{base:_.solid.success},warning:{base:_.solid.warning},danger:{base:_.solid.danger}},radius:{none:{base:"rounded-none"},sm:{base:"rounded-small"},md:{base:"rounded-medium"},lg:{base:"rounded-large"},full:{base:"rounded-full"}},isBordered:{true:{base:"ring-2 ring-offset-2 ring-offset-background dark:ring-offset-background-dark"}},isDisabled:{true:{base:"opacity-disabled"}},isInGroup:{true:{base:["-ms-2 data-[hover=true]:-translate-x-3 rtl:data-[hover=true]:translate-x-3 transition-transform","data-[focus-visible=true]:-translate-x-3 rtl:data-[focus-visible=true]:translate-x-3"]}},isInGridGroup:{true:{base:"m-0 data-[hover=true]:translate-x-0"}},disableAnimation:{true:{base:"transition-none",img:"transition-none"},false:{}}},defaultVariants:{size:"md",color:"default",radius:"full"},compoundVariants:[{color:"default",isBordered:!0,class:{base:"ring-default"}},{color:"primary",isBordered:!0,class:{base:"ring-primary"}},{color:"secondary",isBordered:!0,class:{base:"ring-secondary"}},{color:"success",isBordered:!0,class:{base:"ring-success"}},{color:"warning",isBordered:!0,class:{base:"ring-warning"}},{color:"danger",isBordered:!0,class:{base:"ring-danger"}}]});V({slots:{base:"flex items-center justify-center h-auto w-max",count:"hover:-translate-x-0"},variants:{isGrid:{true:"inline-grid grid-cols-4 gap-3"}}});var Ke=()=>f.jsxs("svg",{"aria-hidden":"true",fill:"none",height:"80%",role:"presentation",viewBox:"0 0 24 24",width:"80%",children:[f.jsx("path",{d:"M12 2C9.38 2 7.25 4.13 7.25 6.75C7.25 9.32 9.26 11.4 11.88 11.49C11.96 11.48 12.04 11.48 12.1 11.49C12.12 11.49 12.13 11.49 12.15 11.49C12.16 11.49 12.16 11.49 12.17 11.49C14.73 11.4 16.74 9.32 16.75 6.75C16.75 4.13 14.62 2 12 2Z",fill:"currentColor"}),f.jsx("path",{d:"M17.0809 14.1489C14.2909 12.2889 9.74094 12.2889 6.93094 14.1489C5.66094 14.9989 4.96094 16.1489 4.96094 17.3789C4.96094 18.6089 5.66094 19.7489 6.92094 20.5889C8.32094 21.5289 10.1609 21.9989 12.0009 21.9989C13.8409 21.9989 15.6809 21.5289 17.0809 20.5889C18.3409 19.7389 19.0409 18.5989 19.0409 17.3589C19.0309 16.1289 18.3409 14.9889 17.0809 14.1489Z",fill:"currentColor"})]}),[wt,Qe]=we({name:"AvatarGroupContext",strict:!1});function Ze(e={}){const{onLoad:r,onError:t,ignoreFallback:a}=e,n=Te(),o=d.useRef(n?new Image:null),[c,i]=d.useState("pending");d.useEffect(()=>{o.current&&(o.current.onload=l=>{s(),i("loaded"),r==null||r(l)},o.current.onerror=l=>{s(),i("failed"),t==null||t(l)})},[o.current]);const s=()=>{o.current&&(o.current.onload=null,o.current.onerror=null,o.current=null)};return $e(()=>{n&&i(Je(e,o))},[n]),a?"loaded":c}function Je(e,r){const{loading:t,src:a,srcSet:n,crossOrigin:o,sizes:c,ignoreFallback:i}=e;if(!a)return"pending";if(i)return"loaded";const s=new Image;return s.src=a,o&&(s.crossOrigin=o),n&&(s.srcset=n),c&&(s.sizes=c),t&&(s.loading=t),r.current=s,s.complete&&s.naturalWidth?"loaded":"loading"}function Xe(e={}){var r,t,a,n,o,c;const i=je(),s=Qe(),l=!!s,{as:h,ref:y,src:b,name:m,icon:g,classNames:u,fallback:v,alt:p=m||"avatar",imgRef:x,color:w=(r=s==null?void 0:s.color)!=null?r:"default",radius:O=(t=s==null?void 0:s.radius)!=null?t:"full",size:L=(a=s==null?void 0:s.size)!=null?a:"md",isBordered:G=(n=s==null?void 0:s.isBordered)!=null?n:!1,isDisabled:R=(o=s==null?void 0:s.isDisabled)!=null?o:!1,isFocusable:M=!1,getInitials:ie=Ae,ignoreFallback:F=!1,showFallback:ue=!1,ImgComponent:q="img",imgProps:T,className:ce,onError:de,disableAnimation:H,...W}=e,fe=h||"span",me=D(y),$=D(x),{isFocusVisible:ge,isFocused:be,focusProps:U}=Be(),{isHovered:ve,hoverProps:pe}=De({isDisabled:R}),E=(c=H??(i==null?void 0:i.disableAnimation))!=null?c:!1,N=Ze({src:b,onError:de,ignoreFallback:F})==="loaded",K=typeof q=="string",he=(!b||!N)&&ue,P=d.useMemo(()=>{var j;return Ue({color:w,radius:O,size:L,isBordered:G,isDisabled:R,isInGroup:l,disableAnimation:E,isInGridGroup:(j=s==null?void 0:s.isGrid)!=null?j:!1})},[w,O,L,G,R,E,l,s==null?void 0:s.isGrid]),Q=Z(u==null?void 0:u.base,ce),A=d.useMemo(()=>M||h==="button",[M,h]),ye=d.useCallback((j={})=>({ref:me,tabIndex:A?0:-1,"data-hover":k(ve),"data-focus":k(be),"data-focus-visible":k(ge),className:P.base({class:Z(Q,j==null?void 0:j.className)}),...J(W,pe,A?U:{})}),[A,P,Q,U,W]),xe=d.useCallback((j={})=>({ref:$,src:b,"data-loaded":k(N),className:P.img({class:u==null?void 0:u.img}),...J(T,j,Ve({disableAnimation:E},{enabled:K}))}),[P,N,T,E,b,$,K]);return{Component:fe,ImgComponent:q,src:b,alt:p,icon:g,name:m,imgRef:$,slots:P,classNames:u,fallback:v,isImgLoaded:N,showFallback:he,ignoreFallback:F,getInitials:ie,getAvatarProps:ye,getImageProps:xe}}var ae=re((e,r)=>{const{Component:t,ImgComponent:a,src:n,icon:o=f.jsx(Ke,{}),alt:c,classNames:i,slots:s,name:l,showFallback:h,fallback:y,getInitials:b,getAvatarProps:m,getImageProps:g}=Xe({...e,ref:r}),u=d.useMemo(()=>!h&&n?null:y?f.jsx("div",{"aria-label":c,className:s.fallback({class:i==null?void 0:i.fallback}),role:"img",children:y}):l?f.jsx("span",{"aria-label":c,className:s.name({class:i==null?void 0:i.name}),role:"img",children:b(l)}):f.jsx("span",{"aria-label":c,className:s.icon({class:i==null?void 0:i.icon}),role:"img",children:o}),[h,n,y,l,i]);return f.jsxs(t,{...m(),children:[n&&f.jsx(a,{...g(),alt:c}),u]})});ae.displayName="NextUI.Avatar";var Ye=ae;function et(e={}){const{domRef:r,isEnabled:t=!0,overflowCheck:a="vertical",visibility:n="auto",offset:o=0,onVisibilityChange:c,updateDeps:i=[]}=e,s=d.useRef(n);d.useEffect(()=>{const l=r==null?void 0:r.current;if(!l||!t)return;const h=(m,g,u,v,p)=>{if(n==="auto"){const x=`${v}${Le(p)}Scroll`;g&&u?(l.dataset[x]="true",l.removeAttribute(`data-${v}-scroll`),l.removeAttribute(`data-${p}-scroll`)):(l.dataset[`${v}Scroll`]=g.toString(),l.dataset[`${p}Scroll`]=u.toString(),l.removeAttribute(`data-${v}-${p}-scroll`))}else{const x=g&&u?"both":g?v:u?p:"none";x!==s.current&&(c==null||c(x),s.current=x)}},y=()=>{const m=[{type:"vertical",prefix:"top",suffix:"bottom"},{type:"horizontal",prefix:"left",suffix:"right"}];for(const{type:g,prefix:u,suffix:v}of m)if(a===g||a==="both"){const p=g==="vertical"?l.scrollTop>o:l.scrollLeft>o,x=g==="vertical"?l.scrollTop+l.clientHeight+o<l.scrollHeight:l.scrollLeft+l.clientWidth+o<l.scrollWidth;h(g,p,x,u,v)}},b=()=>{["top","bottom","top-bottom","left","right","left-right"].forEach(m=>{l.removeAttribute(`data-${m}-scroll`)})};return y(),l.addEventListener("scroll",y),n!=="auto"&&(b(),n==="both"?(l.dataset.topBottomScroll=String(a==="vertical"),l.dataset.leftRightScroll=String(a==="horizontal")):(l.dataset.topBottomScroll="false",l.dataset.leftRightScroll="false",["top","bottom","left","right"].forEach(m=>{l.dataset[`${m}Scroll`]=String(n===m)}))),()=>{l.removeEventListener("scroll",y),b()}},[...i,t,n,a,c,r])}function tt(e){var r;const[t,a]=Ge(e,X.variantKeys),{ref:n,as:o,children:c,className:i,style:s,size:l=40,offset:h=0,visibility:y="auto",isEnabled:b=!0,onVisibilityChange:m,...g}=t,u=o||"div",v=D(n);et({domRef:v,offset:h,visibility:y,isEnabled:b,onVisibilityChange:m,updateDeps:[c],overflowCheck:(r=e.orientation)!=null?r:"vertical"});const p=d.useMemo(()=>X({...a,className:i}),[Me(a),i]);return{Component:u,styles:p,domRef:v,children:c,getBaseProps:(w={})=>{var O;return{ref:v,className:p,"data-orientation":(O=e.orientation)!=null?O:"vertical",style:{"--scroll-shadow-size":`${l}px`,...s,...w.style},...g,...w}}}}var se=re((e,r)=>{const{Component:t,children:a,getBaseProps:n}=tt({...e,ref:r});return f.jsx(t,{...n(),children:a})});se.displayName="NextUI.ScrollShadow";var rt=se,ne={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Y=C.createContext&&C.createContext(ne),at=["attr","size","title"];function st(e,r){if(e==null)return{};var t=nt(e,r),a,n;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],!(r.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(t[a]=e[a])}return t}function nt(e,r){if(e==null)return{};var t={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(r.indexOf(a)>=0)continue;t[a]=e[a]}return t}function z(){return z=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},z.apply(this,arguments)}function ee(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,a)}return t}function I(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?ee(Object(t),!0).forEach(function(a){ot(e,a,t[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ee(Object(t)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))})}return e}function ot(e,r,t){return r=lt(r),r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function lt(e){var r=it(e,"string");return typeof r=="symbol"?r:r+""}function it(e,r){if(typeof e!="object"||!e)return e;var t=e[Symbol.toPrimitive];if(t!==void 0){var a=t.call(e,r||"default");if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function oe(e){return e&&e.map((r,t)=>C.createElement(r.tag,I({key:t},r.attr),oe(r.child)))}function ut(e){return r=>C.createElement(ct,z({attr:I({},e.attr)},r),oe(e.child))}function ct(e){var r=t=>{var{attr:a,size:n,title:o}=e,c=st(e,at),i=n||t.size||"1em",s;return t.className&&(s=t.className),e.className&&(s=(s?s+" ":"")+e.className),C.createElement("svg",z({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,a,c,{className:s,style:I(I({color:e.color||t.color},t.style),e.style),height:i,width:i,xmlns:"http://www.w3.org/2000/svg"}),o&&C.createElement("title",null,o),e.children)};return Y!==void 0?C.createElement(Y.Consumer,null,t=>r(t)):r(ne)}function dt(e){return ut({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"m16 464 480-208L16 48v160l320 48-320 48z"},child:[]}]})(e)}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var S=function(){return S=Object.assign||function(r){for(var t,a=1,n=arguments.length;a<n;a++){t=arguments[a];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(r[o]=t[o])}return r},S.apply(this,arguments)},le=function(e){return{loading:e==null,value:e}},ft=function(){return function(e,r){switch(r.type){case"error":return S(S({},e),{error:r.error,loading:!1,value:void 0});case"reset":return le(r.defaultValue);case"value":return S(S({},e),{error:void 0,loading:!1,value:r.value});default:return e}}},mt=function(e){var r=void 0,t=d.useReducer(ft(),le(r)),a=t[0],n=t[1],o=d.useCallback(function(){var s=void 0;n({type:"reset",defaultValue:s})},[e]),c=d.useCallback(function(s){n({type:"error",error:s})},[]),i=d.useCallback(function(s){n({type:"value",value:s})},[]);return d.useMemo(function(){return{error:a.error,loading:a.loading,reset:o,setError:c,setValue:i,value:a.value}},[a.error,a.loading,o,c,i,a.value])},gt=function(e,r,t){var a=d.useRef(e);return d.useEffect(function(){r(e,a.current)||(a.current=e,t&&t())}),a},bt=function(e,r){var t=!e&&!r,a=!!e&&!!r&&Ce(e,r);return t||a},vt=function(e,r){return gt(e,bt,r)},pt=function(e,r){var t=mt(),a=t.error,n=t.loading,o=t.reset,c=t.setError,i=t.setValue,s=t.value,l=vt(e,o);return d.useEffect(function(){if(!l.current){i(void 0);return}var h=te(l.current,i,c);return function(){h()}},[l.current]),[s,n,a]};const jt=()=>{const{auth:e,firestore:r}=d.useContext(_e),[t]=Se(e),[a,n]=d.useState(""),[o,c]=d.useState([]),i=Oe(r,"messages"),[s,l,h]=pt(i),{theme:y}=Pe();d.useEffect(()=>{const u=Ee(i,Ne("createdAt","asc")),v=te(u,p=>{let x=[];p.forEach(w=>{x.push({...w.data(),id:w.id})}),c(x)});return()=>v()},[]);const b=async u=>{u.preventDefault(),a&&(await ze(i,{uid:t.uid,displayName:t.displayName,photoURL:t.photoURL,text:a,user:t.displayName,createdAt:Ie()}),n(""))},m=d.useRef(null),g=()=>{var u;(u=m.current)==null||u.scrollIntoView({behavior:"smooth"})};return d.useEffect(()=>{g()},[o]),l?f.jsx(ke,{}):f.jsxs("div",{className:` h-screen pt-[64px] m-auto container ${y} text-3xl flex  flex-col gap-4 items-start  `,children:[f.jsxs(rt,{className:"w-full dark:bg-stone-950 bg-zinc-50 rounded-2xl dark:bg-[url('./../images/chat_bg-dark.jpg')] bg-[url('./../images/chat-bg-light.png')]  mt-4 h-3/4 overflow-y-auto",children:[s?o.map(u=>f.jsxs("div",{className:`flex gap-5 p-5 items-center ${t.uid===u.uid?"justify-end":"justify-start"}`,children:[f.jsx(Ye,{isBordered:!0,as:"button",className:`transition-transform ${t.uid===u.uid?"order-2":""}`,color:"secondary",size:"sm",src:`${u.photoURL}`}),f.jsx("div",{className:"text-base w-64  chat dark:bg-[rgb(2,0,36)]  text-white max-h-72 break-words p-2 rounded-md",children:u.text})]},u.uid)):"",f.jsx("div",{ref:m})]}),f.jsx("div",{className:"w-full flex items-center",children:f.jsxs("form",{onSubmit:b,className:"w-full flex items-center",onKeyDown:u=>u.key==="Enter"&&b,children:[f.jsx(Fe,{label:"Message",className:"h-14 ",radius:"none",value:a,placeholder:"Enter your Message",maxLength:500,onChange:u=>n(u.target.value)}),f.jsx(qe,{color:"primary",type:"submit",className:"text-2xl rounded-l-none h-14 ",endContent:f.jsx(dt,{})})]})})]})};export{jt as default};
